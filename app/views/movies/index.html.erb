<p id="notice"><%= notice %></p>


<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Title</th>
      <th scope="col">Text</th>
      <th scope="col">Category</th>
    </tr>
  </thead>
  <tbody>
    <% @movies.each_with_index do |movie,index| %>
      <tr>
        <th><%= index + 1 + (@movies.current_page - 1) * @movies.count  %></th>
        <td><%= link_to movie.title, movie %></td>
        <td><%= movie.text %></td>
        <td><%= movie.rating.overall %></td>
        <td><%= movie.category.capitalize %></td>
        <td><%= link_to 'Edit', edit_movie_path(movie) %></td>
        <td><%= link_to 'Destroy', movie, method: :delete, data: { confirm: 'Are you sure?' } %></td>     
      </tr>
    <% end %>
  </tbody>
  <%= paginate @movies %>
</table>

<%= form_with url: "/", method: :get do |form| %>
  <%= form.label :category, "Filter by category:" %>
  <%= select_tag :category,
      options_for_select(@category, params[:category]),
      :onchange => "window.location.replace('/movies/category/'+this.value);" %>
<% end %>

<br>

<%= link_to 'New Movie', new_movie_path %>


